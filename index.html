
<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TreintaPOS Gestión</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    <style>
        .nav-active { background-color: #eff6ff; color: #2563eb; border-right: 3px solid #2563eb; }
        /* Scrollbar oculta para el POS */
        .no-scrollbar::-webkit-scrollbar { display: none; }
        .no-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }
    </style>
<script type="importmap">
{
  "imports": {
    "react": "https://esm.sh/react@^19.2.3",
    "react-dom/": "https://esm.sh/react-dom@^19.2.3/",
    "react-router-dom": "https://esm.sh/react-router-dom@^7.10.1",
    "react/": "https://esm.sh/react@^19.2.3/",
    "lucide-react": "https://esm.sh/lucide-react@^0.561.0"
  }
}
</script>
<link rel="stylesheet" href="/index.css">
</head>
<body class="bg-gray-100 font-sans h-screen flex overflow-hidden text-gray-800">

    <!-- SIDEBAR -->
    <aside class="w-64 bg-white border-r border-gray-200 flex flex-col hidden md:flex shrink-0">
        <div class="h-16 flex items-center px-6 border-b border-gray-100">
            <div class="w-8 h-8 bg-blue-600 rounded-lg flex items-center justify-center text-white font-bold text-xl mr-3">T</div>
            <span class="font-bold text-xl text-blue-900">TreintaPOS</span>
        </div>
        <nav class="flex-1 p-4 space-y-1">
            <button onclick="window.navigate('pos')" id="btn-pos" class="nav-item w-full flex items-center px-4 py-3 text-gray-600 rounded-lg hover:bg-gray-50 transition-colors">
                <i data-lucide="shopping-cart" class="w-5 h-5 mr-3"></i> Ventas (POS)
            </button>
            <button onclick="window.navigate('inventory')" id="btn-inventory" class="nav-item w-full flex items-center px-4 py-3 text-gray-600 rounded-lg hover:bg-gray-50 transition-colors">
                <i data-lucide="package" class="w-5 h-5 mr-3"></i> Inventario
            </button>
            <button onclick="window.navigate('categories')" id="btn-categories" class="nav-item w-full flex items-center px-4 py-3 text-gray-600 rounded-lg hover:bg-gray-50 transition-colors">
                <i data-lucide="tags" class="w-5 h-5 mr-3"></i> Categorías
            </button>
            <button onclick="window.navigate('purchases')" id="btn-purchases" class="nav-item w-full flex items-center px-4 py-3 text-gray-600 rounded-lg hover:bg-gray-50 transition-colors">
                <i data-lucide="shopping-bag" class="w-5 h-5 mr-3"></i> Compras
            </button>
            <button onclick="window.navigate('history')" id="btn-history" class="nav-item w-full flex items-center px-4 py-3 text-gray-600 rounded-lg hover:bg-gray-50 transition-colors">
                <i data-lucide="history" class="w-5 h-5 mr-3"></i> Historial
            </button>
        </nav>
    </aside>

    <!-- MOBILE HEADER -->
    <div class="md:hidden fixed top-0 w-full h-14 bg-white border-b z-20 flex items-center justify-between px-4">
        <span class="font-bold text-blue-900">TreintaPOS</span>
        <button onclick="document.querySelector('aside').classList.toggle('hidden'); document.querySelector('aside').classList.toggle('absolute'); document.querySelector('aside').classList.toggle('z-50'); document.querySelector('aside').classList.toggle('h-full');"><i data-lucide="menu"></i></button>
    </div>

    <!-- MAIN CONTENT -->
    <main class="flex-1 flex flex-col h-full overflow-hidden pt-14 md:pt-0 relative">
        
        <!-- VISTA: POS (Ventas) -->
        <section id="view-pos" class="view-section h-full flex flex-col md:flex-row p-4 gap-4 hidden">
            <!-- Grid Productos -->
            <div class="flex-1 flex flex-col h-full overflow-hidden">
                <div class="mb-4">
                    <input type="text" id="pos-search" onkeyup="renderPosGrid()" placeholder="Buscar producto..." class="w-full p-3 border rounded-xl shadow-sm outline-none focus:ring-2 focus:ring-blue-500">
                </div>
                <div id="pos-grid" class="grid grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4 overflow-y-auto pr-2 pb-20">
                    <!-- JS Injects Here -->
                </div>
            </div>
            <!-- Carrito -->
            <div class="w-full md:w-96 bg-white rounded-xl shadow-lg border border-gray-200 flex flex-col h-[60vh] md:h-full">
                <div class="p-4 border-b bg-gray-50 rounded-t-xl font-bold flex justify-between">
                    <span>Orden Actual</span>
                    <button onclick="clearCart()" class="text-xs text-red-500 hover:underline">Limpiar</button>
                </div>
                <div class="p-2 border-b">
                    <select id="pos-client" class="w-full p-2 border rounded bg-white text-sm"></select>
                </div>
                <div id="cart-items" class="flex-1 overflow-y-auto p-4 space-y-2">
                    <p class="text-center text-gray-400 mt-10">Carrito vacío</p>
                </div>
                <div class="p-4 bg-gray-50 border-t rounded-b-xl">
                    <div class="flex justify-between text-lg font-bold mb-4">
                        <span>Total</span>
                        <span id="cart-total" class="text-blue-600">$0.00</span>
                    </div>
                    <button onclick="processSale()" class="w-full bg-blue-600 text-white py-3 rounded-lg font-bold hover:bg-blue-700 shadow-lg active:scale-95 transition-transform">
                        Cobrar
                    </button>
                </div>
            </div>
        </section>

        <!-- VISTA: INVENTARIO -->
        <section id="view-inventory" class="view-section p-6 hidden h-full overflow-y-auto">
            <div class="flex justify-between items-center mb-6">
                <h1 class="text-2xl font-bold">Inventario</h1>
                <button onclick="openProductModal()" class="bg-blue-600 text-white px-4 py-2 rounded-lg flex items-center shadow hover:bg-blue-700">
                    <i data-lucide="plus" class="w-4 h-4 mr-2"></i> Nuevo
                </button>
            </div>
            <div class="bg-white rounded-xl shadow-sm border overflow-hidden">
                <table class="w-full text-left">
                    <thead class="bg-gray-50 text-gray-500 text-xs uppercase">
                        <tr>
                            <th class="p-4">Producto</th>
                            <th class="p-4">Cat.</th>
                            <th class="p-4 text-right">Costo</th>
                            <th class="p-4 text-right">Precio</th>
                            <th class="p-4 text-center">Stock</th>
                            <th class="p-4 text-center">Acción</th>
                        </tr>
                    </thead>
                    <tbody id="inventory-list" class="divide-y text-sm"></tbody>
                </table>
            </div>
        </section>

        <!-- VISTA: CATEGORIAS -->
        <section id="view-categories" class="view-section p-6 hidden h-full overflow-y-auto">
            <div class="flex justify-between items-center mb-6">
                <h1 class="text-2xl font-bold">Categorías</h1>
                <button onclick="openCategoryModal()" class="bg-blue-600 text-white px-4 py-2 rounded-lg flex items-center shadow hover:bg-blue-700">
                    <i data-lucide="plus" class="w-4 h-4 mr-2"></i> Nueva
                </button>
            </div>
            <div class="bg-white rounded-xl shadow-sm border p-4">
                <ul id="category-list" class="divide-y"></ul>
            </div>
        </section>

        <!-- VISTA: COMPRAS -->
        <section id="view-purchases" class="view-section p-6 hidden h-full overflow-y-auto">
            <div class="flex justify-between items-center mb-6">
                <h1 class="text-2xl font-bold">Compras</h1>
                <button onclick="openPurchaseModal()" class="bg-blue-600 text-white px-4 py-2 rounded-lg flex items-center shadow hover:bg-blue-700">
                    <i data-lucide="plus" class="w-4 h-4 mr-2"></i> Registrar Entrada
                </button>
            </div>
            <div class="bg-white rounded-xl shadow-sm border overflow-hidden">
                <table class="w-full text-left text-sm">
                    <thead class="bg-gray-50 text-gray-500">
                        <tr><th class="p-4">ID</th><th class="p-4">Fecha</th><th class="p-4">Proveedor</th><th class="p-4 text-right">Total</th></tr>
                    </thead>
                    <tbody id="purchase-history" class="divide-y"></tbody>
                </table>
            </div>
        </section>

        <!-- VISTA: HISTORIAL -->
        <section id="view-history" class="view-section p-6 hidden h-full overflow-y-auto">
            <h1 class="text-2xl font-bold mb-6">Historial de Ventas</h1>
            <div class="bg-white rounded-xl shadow-sm border overflow-hidden">
                <table class="w-full text-left text-sm">
                    <thead class="bg-gray-50 text-gray-500">
                        <tr><th class="p-4">ID</th><th class="p-4">Fecha</th><th class="p-4">Cliente</th><th class="p-4 text-right">Total</th></tr>
                    </thead>
                    <tbody id="sales-history" class="divide-y"></tbody>
                </table>
            </div>
        </section>

    </main>

    <!-- MODAL PRODUCTO -->
    <div id="productModal" class="fixed inset-0 bg-black/50 hidden z-50 flex items-center justify-center p-4">
        <form onsubmit="saveProduct(event)" class="bg-white rounded-xl shadow-xl w-full max-w-lg p-6">
            <h2 class="text-xl font-bold mb-4" id="prodTitle">Producto</h2>
            <input type="hidden" id="prodId">
            <div class="grid grid-cols-2 gap-3">
                <div class="col-span-2"><label class="text-xs font-bold text-gray-500">Nombre</label><input id="prodName" required class="w-full border p-2 rounded"></div>
                <div><label class="text-xs font-bold text-gray-500">SKU</label><input id="prodSku" class="w-full border p-2 rounded"></div>
                <div><label class="text-xs font-bold text-gray-500">Categoría</label><select id="prodCat" class="w-full border p-2 rounded bg-white"></select></div>
                <div><label class="text-xs font-bold text-gray-500">Costo ($)</label><input type="number" step="0.01" id="prodCost" class="w-full border p-2 rounded"></div>
                <div><label class="text-xs font-bold text-gray-500">Precio Venta ($)</label><input type="number" step="0.01" id="prodPrice" required class="w-full border p-2 rounded"></div>
                <div><label class="text-xs font-bold text-gray-500">Stock Inicial</label><input type="number" id="prodStock" class="w-full border p-2 rounded"></div>
                <div><label class="text-xs font-bold text-gray-500">Unidad</label><select id="prodUnit" class="w-full border p-2 rounded bg-white"><option value="unidad">Unidad</option><option value="kg">Kg</option></select></div>
            </div>
            <div class="flex justify-end gap-2 mt-6">
                <button type="button" onclick="closeModal('productModal')" class="px-4 py-2 bg-gray-100 rounded">Cancelar</button>
                <button type="submit" class="px-4 py-2 bg-blue-600 text-white rounded">Guardar</button>
            </div>
        </form>
    </div>

    <!-- MODAL CATEGORIA -->
    <div id="categoryModal" class="fixed inset-0 bg-black/50 hidden z-50 flex items-center justify-center p-4">
        <form onsubmit="saveCategory(event)" class="bg-white rounded-xl shadow-xl w-full max-w-sm p-6">
            <h2 class="text-xl font-bold mb-4">Categoría</h2>
            <div class="mb-3"><label class="text-xs font-bold text-gray-500">Nombre</label><input id="catName" required class="w-full border p-2 rounded"></div>
            <div class="mb-3"><label class="text-xs font-bold text-gray-500">Descripción</label><input id="catDesc" class="w-full border p-2 rounded"></div>
            <div class="flex justify-end gap-2 mt-6">
                <button type="button" onclick="closeModal('categoryModal')" class="px-4 py-2 bg-gray-100 rounded">Cancelar</button>
                <button type="submit" class="px-4 py-2 bg-blue-600 text-white rounded">Guardar</button>
            </div>
        </form>
    </div>

    <!-- MODAL COMPRA -->
    <div id="purchaseModal" class="fixed inset-0 bg-black/50 hidden z-50 flex items-center justify-center p-4">
        <div class="bg-white rounded-xl shadow-xl w-full max-w-2xl p-6 h-[80vh] flex flex-col">
            <h2 class="text-xl font-bold mb-4">Nueva Compra</h2>
            <div class="mb-4">
                <label class="text-xs font-bold text-gray-500">Proveedor</label>
                <select id="purchSupplier" class="w-full border p-2 rounded bg-white"></select>
            </div>
            <div class="bg-gray-50 p-3 rounded mb-4 border grid grid-cols-4 gap-2 items-end">
                <div class="col-span-2"><label class="text-xs text-gray-500">Producto</label><select id="purchProd" class="w-full border p-2 rounded text-sm"></select></div>
                <div><label class="text-xs text-gray-500">Cant.</label><input type="number" id="purchQty" class="w-full border p-2 rounded text-sm" placeholder="0"></div>
                <div><label class="text-xs text-gray-500">Costo</label><input type="number" id="purchCost" class="w-full border p-2 rounded text-sm" placeholder="$"></div>
                <button onclick="addPurchItem()" class="col-span-4 bg-blue-600 text-white py-2 rounded text-sm font-bold mt-2">Agregar Item</button>
            </div>
            <div class="flex-1 overflow-auto border rounded">
                <table class="w-full text-sm"><thead class="bg-gray-100"><tr><th class="p-2">Prod</th><th class="p-2">Cant</th><th class="p-2">Costo</th><th class="p-2">Total</th></tr></thead><tbody id="purchList"></tbody></table>
            </div>
            <div class="pt-4 border-t flex justify-between items-center">
                <span class="font-bold text-xl">Total: $<span id="purchTotal">0.00</span></span>
                <div class="flex gap-2">
                    <button onclick="closeModal('purchaseModal')" class="px-4 py-2 bg-gray-100 rounded">Cancelar</button>
                    <button onclick="finishPurchase()" class="px-4 py-2 bg-green-600 text-white rounded">Finalizar</button>
                </div>
            </div>
        </div>
    </div>

    <script>
        // ESTADO GLOBAL
        const API_URL = 'api.php';
        let store = {
            products: [], categories: [], clients: [], suppliers: [], cart: [], purchItems: []
        };

        // INICIO
        window.addEventListener('DOMContentLoaded', async () => {
            lucide.createIcons();
            await loadData();
            window.navigate('pos'); // Vista por defecto
        });

        // NAVEGACIÓN
        window.navigate = function(viewId) {
            // Ocultar todas las secciones
            document.querySelectorAll('.view-section').forEach(el => el.classList.add('hidden'));
            // Mostrar la seleccionada
            const target = document.getElementById('view-' + viewId);
            if(target) target.classList.remove('hidden');

            // Actualizar botones sidebar
            document.querySelectorAll('.nav-item').forEach(el => el.classList.remove('nav-active'));
            const btn = document.getElementById('btn-' + viewId);
            if(btn) btn.classList.add('nav-active');

            // Cargar datos específicos si es necesario
            if(viewId === 'history') loadHistory();
            if(viewId === 'purchases') loadPurchHistory();
        }

        async function loadData() {
            try {
                const [prods, cats, deps] = await Promise.all([
                    fetch(`${API_URL}?action=products`).then(r => r.json()),
                    fetch(`${API_URL}?action=categories`).then(r => r.json()),
                    fetch(`${API_URL}?action=data_dependencies`).then(r => r.json())
                ]);
                store.products = prods || [];
                store.categories = cats || [];
                store.clients = deps.clients || [];
                store.suppliers = deps.suppliers || [];

                renderInventory();
                renderPosGrid();
                renderCategories();
            } catch (err) { console.error("Error cargando datos:", err); }
        }

        // --- POS ---
        function renderPosGrid() {
            const term = document.getElementById('pos-search').value.toLowerCase();
            const grid = document.getElementById('pos-grid');
            grid.innerHTML = store.products
                .filter(p => p.name.toLowerCase().includes(term) || (p.sku && p.sku.toLowerCase().includes(term)))
                .map(p => `
                    <div onclick="addToCart(${p.id})" class="bg-white p-3 rounded-xl border shadow-sm hover:shadow-md cursor-pointer flex flex-col items-center text-center relative overflow-hidden group">
                        <div class="w-10 h-10 bg-blue-50 rounded-full flex items-center justify-center text-blue-600 font-bold mb-2">${p.name.charAt(0)}</div>
                        <p class="font-bold text-gray-800 text-sm leading-tight line-clamp-2">${p.name}</p>
                        <p class="text-xs text-gray-500 mt-1">Stock: ${parseFloat(p.stock)}</p>
                        <p class="text-blue-600 font-bold mt-1">$${parseFloat(p.price).toFixed(2)}</p>
                    </div>
                `).join('');
            
            // Llenar select clientes si está vacío
            const clientSel = document.getElementById('pos-client');
            if(clientSel.options.length === 0) {
                clientSel.innerHTML = store.clients.map(c => `<option value="${c.id}">${c.name}</option>`).join('');
            }
        }

        window.addToCart = (id) => {
            const p = store.products.find(x => x.id == id);
            if(!p) return;
            const existing = store.cart.find(x => x.id == id);
            if(existing) existing.quantity++;
            else store.cart.push({...p, quantity: 1});
            renderCart();
        };

        function renderCart() {
            const cont = document.getElementById('cart-items');
            if(store.cart.length === 0) {
                cont.innerHTML = '<p class="text-center text-gray-400 mt-10">Carrito vacío</p>';
                document.getElementById('cart-total').innerText = '$0.00';
                return;
            }
            let total = 0;
            cont.innerHTML = store.cart.map((item, idx) => {
                const t = item.price * item.quantity;
                total += t;
                return `
                    <div class="flex justify-between items-center text-sm bg-gray-50 p-2 rounded">
                        <div>
                            <div class="font-bold">${item.name}</div>
                            <div class="text-xs text-gray-500">$${item.price} x ${item.quantity}</div>
                        </div>
                        <div class="text-right">
                            <div class="font-bold">$${t.toFixed(2)}</div>
                            <button onclick="store.cart.splice(${idx},1); renderCart()" class="text-red-500 text-xs">Quitar</button>
                        </div>
                    </div>`;
            }).join('');
            document.getElementById('cart-total').innerText = '$' + total.toFixed(2);
        }

        window.clearCart = () => { store.cart = []; renderCart(); }

        window.processSale = async () => {
            if(store.cart.length === 0) return alert("Carrito vacío");
            const total = store.cart.reduce((s, i) => s + (i.price * i.quantity), 0);
            
            try {
                await fetch(`${API_URL}?action=sales`, {
                    method: 'POST',
                    headers: {'Content-Type':'application/json'},
                    body: JSON.stringify({
                        client_id: document.getElementById('pos-client').value,
                        total: total,
                        payment_method: 'Efectivo',
                        items: store.cart
                    })
                });
                alert("Venta registrada!");
                store.cart = [];
                renderCart();
                loadData(); // Recargar stock
            } catch(e) { alert("Error en venta"); }
        }

        // --- INVENTARIO ---
        function renderInventory() {
            document.getElementById('inventory-list').innerHTML = store.products.map(p => `
                <tr class="hover:bg-gray-50 border-b">
                    <td class="p-4"><div class="font-bold">${p.name}</div><div class="text-xs text-gray-400">${p.sku || ''}</div></td>
                    <td class="p-4 text-gray-500">${p.category_name || '-'}</td>
                    <td class="p-4 text-right text-gray-400">$${parseFloat(p.cost).toFixed(2)}</td>
                    <td class="p-4 text-right font-medium">$${parseFloat(p.price).toFixed(2)}</td>
                    <td class="p-4 text-center"><span class="bg-gray-100 px-2 py-1 rounded text-xs font-bold">${parseFloat(p.stock)}</span></td>
                    <td class="p-4 text-center"><button onclick="deleteProduct(${p.id})" class="text-red-500"><i data-lucide="trash-2" class="w-4 h-4"></i></button></td>
                </tr>
            `).join('');
            lucide.createIcons();
        }

        window.openProductModal = () => {
            document.getElementById('prodCat').innerHTML = '<option value="">-</option>' + store.categories.map(c => `<option value="${c.id}">${c.name}</option>`).join('');
            document.getElementById('productModal').classList.remove('hidden');
        }

        window.saveProduct = async (e) => {
            e.preventDefault();
            const data = {
                name: document.getElementById('prodName').value,
                sku: document.getElementById('prodSku').value,
                category_id: document.getElementById('prodCat').value,
                cost: document.getElementById('prodCost').value,
                price: document.getElementById('prodPrice').value,
                stock: document.getElementById('prodStock').value,
                unit: document.getElementById('prodUnit').value
            };
            await fetch(`${API_URL}?action=products`, { method:'POST', body:JSON.stringify(data)});
            closeModal('productModal');
            loadData();
        }

        window.deleteProduct = async (id) => {
            if(confirm("¿Eliminar?")) {
                await fetch(`${API_URL}?action=products&id=${id}`, { method: 'DELETE'});
                loadData();
            }
        }

        // --- CATEGORIAS ---
        function renderCategories() {
            document.getElementById('category-list').innerHTML = store.categories.map(c => `
                <li class="p-3 flex justify-between hover:bg-gray-50">
                    <span class="font-bold">${c.name}</span>
                    <button onclick="deleteCategory(${c.id})" class="text-red-500"><i data-lucide="trash-2" class="w-4 h-4"></i></button>
                </li>
            `).join('');
            lucide.createIcons();
        }

        window.openCategoryModal = () => document.getElementById('categoryModal').classList.remove('hidden');
        
        window.saveCategory = async (e) => {
            e.preventDefault();
            await fetch(`${API_URL}?action=categories`, { method:'POST', body:JSON.stringify({
                name: document.getElementById('catName').value, description: document.getElementById('catDesc').value
            })});
            closeModal('categoryModal');
            loadData();
        }

        window.deleteCategory = async (id) => {
            if(confirm("¿Eliminar?")) { await fetch(`${API_URL}?action=categories&id=${id}`, { method: 'DELETE'}); loadData(); }
        }

        // --- COMPRAS ---
        window.openPurchaseModal = () => {
            store.purchItems = [];
            renderPurchItems();
            document.getElementById('purchSupplier').innerHTML = store.suppliers.map(s => `<option value="${s.id}">${s.name}</option>`).join('');
            document.getElementById('purchProd').innerHTML = '<option value="">Seleccionar...</option>' + store.products.map(p => `<option value="${p.id}">${p.name}</option>`).join('');
            document.getElementById('purchaseModal').classList.remove('hidden');
        }

        window.addPurchItem = () => {
            const pid = document.getElementById('purchProd').value;
            const qty = document.getElementById('purchQty').value;
            const cost = document.getElementById('purchCost').value;
            const p = store.products.find(x => x.id == pid);
            if(!p || !qty || !cost) return;

            store.purchItems.push({ product_id: pid, name: p.name, quantity: qty, cost: cost, total: qty*cost });
            renderPurchItems();
            document.getElementById('purchQty').value = ''; document.getElementById('purchCost').value = '';
        }

        function renderPurchItems() {
            let t = 0;
            document.getElementById('purchList').innerHTML = store.purchItems.map(i => {
                t += parseFloat(i.total);
                return `<tr><td class="p-2">${i.name}</td><td class="p-2">${i.quantity}</td><td class="p-2">$${i.cost}</td><td class="p-2">$${i.total}</td></tr>`;
            }).join('');
            document.getElementById('purchTotal').innerText = t.toFixed(2);
        }

        window.finishPurchase = async () => {
            if(store.purchItems.length === 0) return;
            const total = document.getElementById('purchTotal').innerText;
            await fetch(`${API_URL}?action=purchases`, { method:'POST', body:JSON.stringify({
                supplier_id: document.getElementById('purchSupplier').value,
                total: total,
                items: store.purchItems
            })});
            closeModal('purchaseModal');
            loadData();
        }

        // --- HISTORIAL ---
        async function loadHistory() {
             const res = await fetch(`${API_URL}?action=sales`).then(r=>r.json());
             document.getElementById('sales-history').innerHTML = res.map(x => `
                <tr class="border-b"><td class="p-4">#${x.id}</td><td class="p-4">${x.date}</td><td class="p-4">${x.client_name || '-'}</td><td class="p-4 text-right font-bold">$${parseFloat(x.total).toFixed(2)}</td></tr>
             `).join('');
        }
        
        async function loadPurchHistory() {
             const res = await fetch(`${API_URL}?action=purchases`).then(r=>r.json());
             document.getElementById('purchase-history').innerHTML = res.map(x => `
                <tr class="border-b"><td class="p-4">#${x.id}</td><td class="p-4">${x.date}</td><td class="p-4">${x.supplier_name || '-'}</td><td class="p-4 text-right font-bold">$${parseFloat(x.total).toFixed(2)}</td></tr>
             `).join('');
        }

        // UTILS
        window.closeModal = (id) => document.getElementById(id).classList.add('hidden');
    </script>
<script type="module" src="/index.tsx"></script>
</body>
</html>
